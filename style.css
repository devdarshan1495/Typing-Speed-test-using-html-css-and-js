
:root { /* Default Theme: Serika Dark based */
    --bg-color: #323437; --text-color: #e2e2e2; --sub-text-color: #646669;
    --caret-color: #e2e2e2; --accent-color: #e2b714; --correct-color: #d1d0c5;
    --incorrect-color: #ca4754; --incorrect-bg-color: rgba(202, 71, 84, 0.15);
    --ui-text-color: #646669; --ui-hover-text-color: #e2e2e2; --ui-button-bg: transparent;
    --ui-button-hover-bg: #3c3e41; --navbar-bg: #2c2e31; --footer-text-color: #4a4c4f;
    --card-bg: var(--navbar-bg); 
    --font-main: 'Lexend Deca', sans-serif; --font-mono: 'Roboto Mono', monospace;
    --border-radius: 6px; --shadow-color: rgba(0,0,0,0.2);
}
/* --- THEMES (Original + 10 New) --- */
[data-theme="dracula"] { --bg-color: #282a36; --text-color: #f8f8f2; --sub-text-color: #6272a4; --caret-color: #f8f8f2; --accent-color: #50fa7b; --correct-color: #f8f8f2; --incorrect-color: #ff5555; --incorrect-bg-color: rgba(255, 85, 85, 0.15); --ui-text-color: #6272a4; --ui-hover-text-color: #bd93f9; --ui-button-hover-bg: #44475a; --navbar-bg: #21222c; --footer-text-color: #44475a; --card-bg: var(--navbar-bg); }
[data-theme="oblivion"] { --bg-color: #2E3440; --text-color: #ECEFF4; --sub-text-color: #4C566A; --caret-color: #ECEFF4; --accent-color: #D08770; --correct-color: #ECEFF4; --incorrect-color: #BF616A; --incorrect-bg-color: rgba(191, 97, 106, 0.15); --ui-text-color: #4C566A; --ui-hover-text-color: #A3BE8C; --ui-button-hover-bg: #3B4252; --navbar-bg: #272C36; --footer-text-color: #3B4252; --card-bg: var(--navbar-bg); }
[data-theme="light-classic"] { --bg-color: #F0F2F5; --text-color: #2c3e50; --sub-text-color: #7f8c8d; --caret-color: #2c3e50; --accent-color: #3498db; --correct-color: #27ae60; --incorrect-color: #e74c3c; --incorrect-bg-color: rgba(231, 76, 60, 0.1); --ui-text-color: #7f8c8d; --ui-hover-text-color: #3498db; --ui-button-hover-bg: #e1e5e8; --navbar-bg: #E1E5E8; --footer-text-color: #95a5a6; --card-bg: #FFFFFF; --shadow-color: rgba(44, 62, 80, 0.1); }
[data-theme="botanical"] { --bg-color: #F1F7ED; --text-color: #4A4A4A; --sub-text-color: #7C8B83; --caret-color: #6B8E23; --accent-color: #8FBC8F; --correct-color: #6B8E23; --incorrect-color: #CD5C5C; --incorrect-bg-color: rgba(205, 92, 92, 0.1); --ui-text-color: #7C8B83; --ui-hover-text-color: #556B2F; --ui-button-hover-bg: #DDE8D5; --navbar-bg: #E0EAD6; --footer-text-color: #A9B9AE; --card-bg: #FFFFFF; --shadow-color: rgba(107, 142, 35, 0.1); }
[data-theme="ocean-deep"] { --bg-color: #0A192F; --text-color: #CCD6F6; --sub-text-color: #8892B0; --caret-color: #64FFDA; --accent-color: #64FFDA; --correct-color: #CCD6F6; --incorrect-color: #FF79C6; --incorrect-bg-color: rgba(255, 121, 198, 0.1); --ui-text-color: #8892B0; --ui-hover-text-color: #64FFDA; --ui-button-hover-bg: #112240; --navbar-bg: #061222; --footer-text-color: #465372; --card-bg: #112240;}
[data-theme="sunset-glow"] { --bg-color: #2C2C2C; --text-color: #F5F5F5; --sub-text-color: #A5A5A5; --caret-color: #FF8C00; --accent-color: #FF6347; --correct-color: #F5F5F5; --incorrect-color: #FF4500; --incorrect-bg-color: rgba(255, 69, 0, 0.15); --ui-text-color: #A5A5A5; --ui-hover-text-color: #FF7F50; --ui-button-hover-bg: #3D3D3D; --navbar-bg: #1E1E1E; --footer-text-color: #5C5C5C; --card-bg: #333333;}
[data-theme="stealth-ops"] { --bg-color: #121212; --text-color: #9E9E9E; --sub-text-color: #424242; --caret-color: #757575; --accent-color: #616161; --correct-color: #9E9E9E; --incorrect-color: #BDBDBD; --incorrect-bg-color: rgba(97, 97, 97, 0.1); --ui-text-color: #424242; --ui-hover-text-color: #757575; --ui-button-hover-bg: #1F1F1F; --navbar-bg: #0A0A0A; --footer-text-color: #303030; --card-bg: #1C1C1C; }
[data-theme="cyberpunk-neon"] { --bg-color: #0D0221; --text-color: #C0FCF4; --sub-text-color: #2DE2E6; --caret-color: #F0F; --accent-color: #FA3C7C; --correct-color: #C0FCF4; --incorrect-color: #FDCA40; --incorrect-bg-color: rgba(253, 202, 64, 0.15); --ui-text-color: #2DE2E6; --ui-hover-text-color: #F0F; --ui-button-hover-bg: #2A0A5E; --navbar-bg: #090117; --footer-text-color: #1C053B; --card-bg: #140330; }
[data-theme="minty-fresh"] { --bg-color: #E6FFFA; --text-color: #047857; --sub-text-color: #5EEAD4; --caret-color: #065F46; --accent-color: #10B981; --correct-color: #059669; --incorrect-color: #EF4444; --incorrect-bg-color: rgba(239, 68, 68, 0.1); --ui-text-color: #5EEAD4; --ui-hover-text-color: #065F46; --ui-button-hover-bg: #C3FAF0; --navbar-bg: #D1FAE5; --footer-text-color: #A7F3D0; --card-bg: #FFFFFF; --shadow-color: rgba(16, 185, 129, 0.1); }
[data-theme="coffee-shop"] { --bg-color: #F5EFE6; --text-color: #4A3B31; --sub-text-color: #A4958A; --caret-color: #6F4E37; --accent-color: #8B4513; --correct-color: #4A3B31; --incorrect-color: #D2691E; --incorrect-bg-color: rgba(210, 105, 30, 0.1); --ui-text-color: #A4958A; --ui-hover-text-color: #6F4E37; --ui-button-hover-bg: #EAE0D5; --navbar-bg: #E0D5C7; --footer-text-color: #BCAFA2; --card-bg: #FFF9F2; --shadow-color: rgba(111, 78, 55, 0.1); }
[data-theme="grape-soda"] { --bg-color: #2C0735; --text-color: #E0BBF5; --sub-text-color: #A976C5; --caret-color: #D082F5; --accent-color: #8A2BE2; --correct-color: #E0BBF5; --incorrect-color: #FF69B4; --incorrect-bg-color: rgba(255, 105, 180, 0.1); --ui-text-color: #A976C5; --ui-hover-text-color: #D082F5; --ui-button-hover-bg: #4B0F5A; --navbar-bg: #1F0526; --footer-text-color: #3E0A4A; --card-bg: #3D0A4A;}
[data-theme="mono-amber"] { --bg-color: #1A1A1A; --text-color: #FFCA28; --sub-text-color: #757575; --caret-color: #FFCA28; --accent-color: #FFB300; --correct-color: #FFCA28; --incorrect-color: #FF7043; --incorrect-bg-color: rgba(255, 112, 67, 0.15); --ui-text-color: #757575; --ui-hover-text-color: #FFD54F; --ui-button-hover-bg: #303030; --navbar-bg: #101010; --footer-text-color: #424242; --card-bg: #212121; }
[data-theme="retro-terminal"] { --bg-color: #000000; --text-color: #00FF00; --sub-text-color: #008000; --caret-color: #00FF00; --accent-color: #32CD32; --correct-color: #00FF00; --incorrect-color: #FFFF00; --incorrect-bg-color: rgba(100, 100, 0, 0.2); --ui-text-color: #008000; --ui-hover-text-color: #32CD32; --ui-button-hover-bg: #1A1A1A; --navbar-bg: #080808; --footer-text-color: #111111; --card-bg: #0F0F0F; }


html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; }
body { font-family: var(--font-main); background-color: var(--bg-color); color: var(--ui-text-color); display: flex; flex-direction: column; align-items: stretch; min-height: 100vh; transition: background-color 0.2s ease, color 0.2s ease; }

.app-wrapper { display: flex; flex-direction: column; width: 100%; height: 100%; overflow: hidden; }
.navbar { background-color: var(--navbar-bg); padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px var(--shadow-color); flex-shrink: 0; z-index: 10; }
.navbar .logo { display:flex; align-items:center;}
.navbar .logo .logo-icon {font-size: 1.5em; color: var(--accent-color); margin-right: 8px;}
.navbar .logo h1 { font-size: 1.4em; font-weight: 700; color: var(--accent-color); cursor: pointer; transition: color 0.2s; margin: 0; }
.nav-actions { display:flex; align-items:center; margin-left: auto; /* Pushes actions to the right */ }
/* Nav links removed from HTML as per implied focus on single test view for fullscreen */
/* If re-added, their CSS from previous good version can be used */
.nav-actions button { background: none; border: none; cursor: pointer; } /* Generic for potential future action buttons */
#themeSwitcher { padding: 6px 10px; border-radius: 4px; background: var(--ui-button-hover-bg); color: var(--ui-hover-text-color); border: 1px solid var(--text-color); font-family: var(--font-main); cursor: pointer; margin-left: 15px; /* Space from any other potential actions */ }

#mainContent { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; width: 100%; max-width: 1000px; margin: 0 auto; }
.page-content.active { flex-grow: 1; display: flex; flex-direction: column; align-items: center; animation: pageFadeIn 0.3s ease-out; width:100%; }
#typingTest.active { justify-content: center; }

.typing-test-area { display: flex; flex-direction: column; align-items: center; width: 100%; gap: 20px; margin: auto; }
.test-config-bar { display: flex; justify-content: center; align-items: center; gap: 8px; flex-wrap: wrap; margin-bottom: 15px; }
.config-group { display: flex; gap: 5px; }
.config-button { background-color: var(--card-bg); border: 1px solid var(--sub-text-color); color: var(--sub-text-color); padding: 7px 14px; font-family: var(--font-main); font-size: 0.85em; border-radius: var(--border-radius); cursor: pointer; transition: all 0.15s ease; }
.config-button:hover { background-color: var(--ui-button-hover-bg); color: var(--ui-hover-text-color); border-color: var(--ui-hover-text-color); }
.config-button.active { background-color: var(--accent-color); color: var(--bg-color) !important; font-weight: 600; border-color: var(--accent-color); }
[data-theme="light-classic"] .config-button.active, [data-theme="minty-fresh"] .config-button.active, [data-theme="coffee-shop"] .config-button.active { color: var(--white) !important; }
.config-button:active { transform: scale(0.96); }
.test-info-bar { display: flex; justify-content: center; align-items: baseline; gap: 20px; font-family: var(--font-mono); font-size: clamp(1.5em, 4vw, 2em); color: var(--accent-color); width: 100%; padding: 5px 0; transition: opacity 0.2s ease; opacity: 0; text-align: center; }
.test-info-bar.visible { opacity: 1; }
.test-info-bar span { margin: 0 5px; display: inline-block; min-width: 40px; text-align: center;}
.test-info-bar span.label-unit {font-size: 0.4em; color: var(--sub-text-color); margin-left: 1px; display: inline;}

.words-container { font-family: var(--font-mono); font-size: clamp(1.4em, 4.5vw, 2.2em); line-height: 2; color: var(--sub-text-color); max-height: calc(clamp(1.4em, 4.5vw, 2.2em) * 2 * 3.5); overflow: hidden; width: 100%; text-align: left; cursor: text; position: relative; padding: 10px 0; margin-bottom: 15px; }
.word { display: inline-block; margin-right: 0.4em; white-space: nowrap; }
.letter { color: var(--sub-text-color); display: inline-block; position: relative; transition: color 0.05s ease, background-color 0.05s ease, transform 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94); transform: translateY(0); }
.letter.typed { color: var(--text-color); }
.letter.correct { color: var(--correct-color) !important; transform: translateY(-4px); /* Lift effect */ }
.letter.incorrect { color: var(--incorrect-color) !important; background-color: var(--incorrect-bg-color); border-radius: 2px; transform: translateY(0); /* Stay grounded */ }

@keyframes caretPulse { 0%, 100% {background-color: var(--caret-color); } 50% { background-color: transparent; } }
#caret { width: 2.5px; height: calc(clamp(1.4em, 4.5vw, 2.2em) * 1.15); background-color: var(--caret-color); position: absolute; border-radius: 1px; transition: left 0.05s linear, top 0.05s linear; animation: caretPulse 1s infinite; opacity: 0; pointer-events: none;}
#caret.visible { opacity: 1; }
#hidden-input { position: absolute; left: -9999px; opacity: 0; }
.test-controls-footer { display: flex; justify-content: center; gap: 15px; width: 100%; padding: 5px;}
.test-controls-footer button { background: none; border: none; color: var(--ui-text-color); font-size: clamp(1.5em, 5vw, 1.8em); padding: 10px; border-radius: 50%; cursor: pointer; transition: color 0.2s ease, background-color 0.2s ease, transform 0.1s ease; }
.test-controls-footer button:hover { color: var(--ui-hover-text-color); background-color: var(--ui-button-hover-bg); }
.test-controls-footer button:active {transform: scale(0.9);}

.results-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.7); align-items: center; justify-content: center; z-index: 100; opacity: 0; transition: opacity 0.3s ease; }
.results-overlay.visible { display: flex; opacity: 1; }
.results-box { background-color: var(--card-bg); color: var(--text-color); padding: 25px 35px; border-radius: var(--border-radius); box-shadow: 0 5px 20px var(--shadow-color); text-align: center; border: 1px solid var(--navbar-bg); transform: scale(0.95); opacity: 0; transition: transform 0.3s ease 0.1s, opacity 0.3s ease 0.1s; width: 90%; max-width: 480px; }
.results-overlay.visible .results-box { transform: scale(1); opacity: 1;}
.results-box h2 { font-size: 1.8em; color: var(--accent-color); margin-bottom: 15px; }
.results-box p { font-size: clamp(1.1em, 2.8vw, 1.3em); margin: 10px 0; font-family: var(--font-mono); display:flex; justify-content: space-between; align-items: baseline;}
.results-box p .label { color: var(--sub-text-color); text-align: left; margin-right:10px; font-size: 0.9em;}
.results-box p strong { color: var(--text-color); font-weight: 700; display: inline-block; animation: resultValuePop 0.3s ease-out; text-align:right; }
@keyframes resultValuePop { 0% {transform: scale(0.8); opacity: 0.5;} 100% {transform: scale(1); opacity: 1;} }
.results-box button { margin-top: 25px; background-color:var(--accent-color); color: var(--bg-color); padding: 10px 25px; border:none; border-radius: var(--border-radius); font-size:1em; font-weight: 600; transition: filter 0.2s, transform 0.1s; }
.results-box button:hover {filter: brightness(1.1);}
.results-box button:active {transform: scale(0.98);}
[data-theme="light-classic"] .results-box button, [data-theme="minty-fresh"] .results-box button, [data-theme="coffee-shop"] .results-box button {color: var(--white);}

@keyframes pageFadeIn { from {opacity: 0; } to {opacity: 1;}}
.stats-history-page { padding: 20px; overflow-y: auto; height: 100%; }
.stats-history-page h2 { color: var(--text-color); margin-bottom: 20px; text-align: center;}
.stats-summary { background-color: var(--card-bg); padding: 20px; border-radius: var(--border-radius); margin-bottom:20px; text-align: center; font-family:var(--font-mono); border: 1px solid var(--border-color); }
.stats-summary p { font-size: 1.1em; margin-bottom: 5px; color: var(--sub-text-color);}
.stats-summary strong { font-size: 1.3em; color: var(--accent-color); }
.stats-history-list { list-style: none; padding: 0; max-height: 40vh; overflow-y: auto; }
.stats-history-list li { background-color: var(--card-bg); padding: 15px; border-radius: var(--border-radius); margin-bottom: 10px; display: grid; grid-template-columns: auto 1fr; gap: 10px; align-items: center; font-family: var(--font-mono); font-size: 0.9em; animation: listItemFadeIn 0.3s ease-out forwards; opacity: 0; transform: translateX(-10px); border: 1px solid var(--border-color); }
.stats-history-list li:nth-child(odd) { background-color: var(--ui-button-hover-bg); }
@keyframes listItemFadeIn { to { opacity: 1; transform: translateX(0);} }
.stats-history-list li .stat-values { display: flex; gap: 15px; flex-wrap:wrap; justify-content: flex-end; }
.stats-history-list li .stat-values span {white-space: nowrap;}
.stats-history-list li .stat-date {font-size: 0.8em; color: var(--sub-text-color); text-align: left; }
.stats-history-list #noHistoryMsg { background:transparent !important; box-shadow:none; border:none; text-align:center; color: var(--sub-text-color); padding: 20px 0 !important;}

.graph-container { background-color: var(--card-bg); padding: 20px; border-radius: var(--border-radius); margin-top: 20px; box-shadow: 0 2px 8px var(--shadow-color); border: 1px solid var(--border-color); }
.graph-container h3 { margin-bottom: 15px; color: var(--text-color); font-size: 1.2em;}
#wpmHistoryChart {max-height: 250px;}

.app-footer { background-color: var(--navbar-bg); padding: 10px 20px; text-align: center; font-size: 0.85em; color: var(--footer-text-color); flex-shrink: 0; border-top: 1px solid var(--border-color);}
.app-footer a { color: var(--accent-color); text-decoration: none; margin: 0 5px;}
.app-footer a:hover { text-decoration: underline; }

@media (max-width: 768px) { #mainContent {padding: 10px;} .navbar { padding: 10px 15px; margin-bottom: 10px;} .nav-actions #themeSwitcher {font-size: 0.8em; padding: 5px;} .typing-test-area { gap: 15px; } .test-config-bar {gap: 5px; margin-bottom:10px;} .config-button {padding: 6px 10px; font-size:0.75em;} .test-info-bar { font-size: clamp(1em, 3.5vw, 1.3em); gap: 8px; } .stats-history-list li {grid-template-columns: 1fr; text-align: center;} .stats-history-list li .stat-date {margin-bottom: 5px;} .stats-history-list li .stat-values {justify-content: center;} }
@media (max-width: 480px) { .navbar .logo h1 {font-size:1.2em;} #themeSwitcher{max-width:100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;} .words-container { font-size: clamp(1em, 4vw, 1.5em); line-height: 1.7;} #caret { height: calc(clamp(1em, 4vw, 1.5em) * 1.1); } .test-info-bar span {min-width: 30px;} .results-box { padding: 15px 20px;} .results-box p {font-size: clamp(0.9em, 2.5vw, 1.1em);} .stats-history-list li .stat-values {gap: 10px;} .stats-history-list li .stat-values span {font-size: 0.85em;}}
